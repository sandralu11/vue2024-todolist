import{_ as z,u as A,a as B,r as a,o as E,c as k,b as n,d as i,e as t,t as v,w as N,v as O,F as y,f as w,g as P,n as b,p as D,h as V}from"./index-uo3-x8_x.js";const F=h=>(D("data-v-dbd79a5c"),h=h(),V(),h),M={id:"todoListPage",class:"bg-half"},R=F(()=>t("h1",null,[t("a",{href:"#"},"ONLINE TODO LIST")],-1)),q={class:"todo_sm"},H={class:"conatiner todoListPage vhContainer"},J={class:"todoList_Content"},U={class:"inputBox"},X=["disabled"],G={key:0},K={key:1,class:"todoList_list"},Q={class:"todoList_tab"},W=["onClick"],Y={class:"todoList_items"},Z={class:"todoList_item"},tt={class:"todoList_label"},st=["onClick","checked"],et=["onClick"],ot={class:"todoList_statistics"},r="https://todolist-api.hexschool.io",at={__name:"TodoView",setup(h){const c=document.cookie.replace(/(?:(?:^|.*;\s*)todolistCookieName\s*\=\s*([^;]*).*$)|^.*$/,"$1"),L=A(),g=B(),m=a({nickname:L.query.name}),f=a(!1);E(()=>{c?_():g.push("/LoginPage")});const C=async()=>{try{const s=await P.post(`${r}/users/sign_out`,{},{headers:{authorization:c}});g.push("/")}catch(s){console.log(s.message)}};a("");const l=a([]),d=a(""),_=async()=>{const o=await(await fetch(`${r}/todos`,{headers:{Authorization:c}})).json();l.value=o.data},T=async()=>{if(d.value.length<=0)return;f.value=!0,await(await fetch(`${r}/todos`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:c},body:JSON.stringify({content:d.value})})).json(),d.value="",await _(),f.value=!1},$=async s=>{const o=s.id;await(await fetch(`${r}/todos/${o}`,{method:"DELETE",headers:{Authorization:c}})).json(o),await _()},x=async s=>{await(await fetch(`${r}/todos/${s}/toggle`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:c}})).json(),await _()},S=a([{title:"全部"},{title:"待完成"},{title:"已完成"}]),p=a(0),I=k(()=>p.value===1?l.value.filter(s=>s.status==!1):p.value===2?l.value.filter(s=>s.status==!0):l.value),j=k(()=>l.value.filter(o=>o.status==!1).length);return(s,o)=>(n(),i("div",M,[t("nav",null,[R,t("ul",null,[t("li",q,[t("span",null,v(m.value.nickname)+"的代辦",1)]),t("li",null,[t("a",{onClick:C},"登出")])])]),t("div",H,[t("div",J,[t("div",U,[N(t("input",{type:"text",placeholder:"請輸入待辦事項","onUpdate:modelValue":o[0]||(o[0]=e=>d.value=e)},null,512),[[O,d.value]]),t("button",{onClick:T,class:"add-btn",disabled:f.value}," + ",8,X)]),l.value.length<=0?(n(),i("div",G,"目前尚無待辦事項")):(n(),i("div",K,[t("ul",Q,[(n(!0),i(y,null,w(S.value,(e,u)=>(n(),i("li",{key:u,onClick:nt=>p.value=u},[t("a",{class:b({active:p.value===u})},v(e.title),3)],8,W))),128))]),t("div",Y,[t("ul",Z,[(n(!0),i(y,null,w(I.value,e=>(n(),i("li",{key:e.id},[t("label",tt,[t("input",{class:"todoList_input",type:"checkbox",onClick:u=>x(e.id,e.status),checked:e.status},null,8,st),t("span",{class:b({"text-decoration-line-through":e.status})},v(e.content),3)]),t("button",{type:"button",onClick:u=>$(e),class:"btn"},"X",8,et)]))),128))]),t("div",ot,[t("p",null,v(j.value)+" 個待完成項目",1)])])]))])])]))}},ct=z(at,[["__scopeId","data-v-dbd79a5c"]]);export{ct as default};
